<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('header.ejs') %>
</head>

<body id="page-top">
<!-- Page Wrapper -->
<div id="wrapper">

    <!-- Sidebar -->
    <%- include('sidebar.ejs') %>
    <!-- End of Sidebar -->

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

        <!-- Main Content -->
        <div id="content">

            <!-- Topbar -->
            <%- include('topbar.ejs') %>
            <!-- End of Topbar -->

            <!-- Begin Page Content -->
            <div class="container-fluid">
                <div class="card shadow mb-4">
                    <input type="hidden" id="jsonData" value="<%= JSON.stringify(data) %>"/>
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">키워드별 순위정보</h6>
                    </div>
                    <div class="card-header py-3">
                        <a class="nav-link dropdown-toggle" style="height: 30px; display: inline-block" href="#"
                           id="userDropdown" role="button"
                           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <span class="mr-2 d-none d-lg-inline text-gray-600 small" style="font-size: 100%;">
                                제품명 :
                                <% if (data.selected !== "") { %>
                                    <%= data.selected.product_name %>
                                <% } else { %>
                                    <%= data.products[0].product_name %>
                                <% } %>
                            </span>
                        </a>
                        <!-- Dropdown - User Information -->
                        <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in"
                             aria-labelledby="userDropdown">
                            <% data.products.forEach( product => { %>
                                <a class="dropdown-item" onclick="productSelect(<%= product.product_id %>)">
                                    <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
                                    <%= product.product_name %>
                                </a>
                            <% }) %>
                        </div>

                        <span class="mr-2 d-none d-lg-inline text-gray-600 small" style="font-size: 100%;">
                            키워드 :
                        </span>
                        <select class="selectpicker text-gray-600" multiple data-actions-box="true"
                                data-selected-text-format="count > 3">
                            <% data.selected.keyword_list.forEach(keyword => { %>
                                <option selected><%= keyword %></option>
                            <% }) %>
                        </select>

                        <div style="display: inline-block; float: right;">
                            <span class="mr-2 d-none d-lg-inline text-gray-600 small" style="font-size: 100%;">
                                날짜 선택 : <input type="text"
                                               style="font-size: 95%; height: 30px; width: 190px; display: inline-block;"
                                               id="dateRangePicker" class="form-control"
                                               value="<%= data.selected.startDate %> ~ <%= data.selected.endDate %>">
                            </span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="chart-area" style="height: 100%">
                            <canvas id="Chart-" height="620px"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.container-fluid -->

        </div>
        <!-- End of Main Content -->

        <!-- Footer -->
        <%- include('footer.ejs') %>
        <!-- End of Footer -->

    </div>
    <!-- End of Content Wrapper -->

</div>
<!-- End of Page Wrapper -->

<!-- Scroll to Top Button-->
<a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
</a>

<%- include('defaultScripts.ejs') %>

<!-- Page level plugins -->
<script src="/template/mypage/vendor/chart.js/Chart.min.js"></script>

<!-- DatePicker scripts -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css"/>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>

<!-- Latest compiled and minified JavaScript 한국어 번역 파일 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.18/js/i18n/defaults-ko_KR.min.js"></script>

<!-- Page level custom scripts -->
<script src="/js/productDetail.js"></script>

</body>

</html>